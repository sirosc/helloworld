resources:
- name: Landing Zone
  subtitle: Cloud Landing Zone
  color: navy
  children:
  - id: MasterOrg
    name: Master Organization
    children: 
    - id: MasterAcct
      name: Master Account 
      children: 
      - id: OrgPolicy
        name: Org Policies
      - id: CoreOU
        name: Core OU
      - id: Orgs
        name: Organizations
      - id: SSO
        name: Single Sign-on (SSO)
      - id: MasterGZEng
        name: Master Account Guardrailz Engine
        backgroundColor: LightSteelBlue
      - id: GZTags
        name: Guardrailz Tag Model (Master)
        backgroundColor: LightSteelBlue
       
        
    - id: DevStack
      name: Development Stack
      children: 
      - id: GZDev
        name: Guardrailz Dev Components
        backgroundColor: LightSteelBlue
        children: 
        - id: SecModel
          name: Security Model
        - id: PluginOrch
          name: Plug-in Orchestrator (Go)
      - id: IaC
        name: Infrastructure as Code (IaC)
        children: 
        - id: IaCTemp
          name: IaC Templates
        - id: IaCConfig
          name: IaC Config
      - id: SSP
        name: Security Plans
        children: 
        - id: OSCAL
          name: OSCAL
      - id: WorkPkgs
        name: Control Workload Packages
        
        
    - id: SecurityAcct
      name: Security Account
      children: 
      - id: SecAcctPolicy
        name: Security Account Policies
      - id: SecEvents
        name: Security Events
      - id: GuardDuty
        name: Guard Duty
        
        
    - id: LoggingAcct
      name: Logging Account
      children: 
      - id: LogAcctPolicy
        name: Logging Account Policies
      - id: CloudTrailLogs
        name: Cloudtrail Logs
        
        
    - id: SharedSvcAcct
      name: Shared Services Account
      children: 
      - id: SharedSvcAcctPolicy
        name: Shared Services Account Policies
      - id: TransitGW
        name: Transit Gateway
      - id: SharedDB
        name: Shared Database
      - id: ShareGZEng
        name: Shared Services Guardrailz Engine
        backgroundColor: LightSteelBlue
        
        
    - id: WorkloadAccts
      name: Workload Accounts
      children: 
      - id: WorkloadAcctA
        name: Workload Account A
        children: 
        - id: WorkAPolicy
          name: Workload Account A Policies
        - id: WorkConfigRules
          name: Workload Config Rules
        - id: WorkGZEng
          name: Workload Guardrailz Engine
          backgroundColor: LightSteelBlue
        - id: GZWorkTags
          name: Guardrailz Tag Model (Workloads)
          backgroundColor: LightSteelBlue
        - id: WorkloadA
          name: Workload A
        - id: EKSControl
          name: EKS Control Plane
          children: 
          - id: EKSCtlAZ1
            name: EKS Control AZ1
          - id: EKSCtlAZ2
            name: EKS Control AZ2
          - id: EKSCtlAZ3
            name: EKS Control AZ3
        - id: EKSWorkload
          name: EKS Workload Nodes
          children: 
          - id: EKSNodeGrpA
            name: EKS Managed Node Group A
            children: 
            - id: NodeA1
              name: Node A1
            - id: NodeA2
              name: Node A2
          - id: EKSNodeGrpB
            name: EKS Managed Node Group B
            children: 
            - id: NodeB1
              name: Node B1
            - id: NodeB2
              name: Node B2
          
      - id: WorkloadAcctB
        name: Workload Account B
      - id: WorkloadAcctC
        name: Workload Account C
    
perspectives:
- name: Top
  defaultRelationLabel: Provides Services to
  color: royalblue
  relations:
  - from: MasterAcct
    to: SecurityAcct
  - from: MasterAcct
    to: LoggingAcct
  - from: MasterAcct
    to: SharedSvcAcct
  - from: SecurityAcct
    to: WorkloadAccts
  - from: LoggingAcct
    to: WorkloadAccts
  - from: SharedSvcAcct
    to: WorkloadAccts
    
  notes: |-
    Top Level Structure for the LZ
    
- name: Pipelines
  relations: 
  - from: DevStack
    to: OrgPolicy
    label: Control Pipeline
  - from: DevStack
    to: WorkAPolicy
    label: Control Pipeline
  - from: DevStack
    to: WorkloadA
    label: Workload Pipeline
  - from: DevStack
    to: LogAcctPolicy
    label: Control Pipeline
  - from: DevStack
    to: SecAcctPolicy
    label: Control Pipeline
    
  notes: |-
    Primary pipelines in scope of the Guardrailz Landing Zone model
    
- name: Policies
  defaultRelationLabel: Deploys to
  relations: 
  - from: PluginOrch
    to: OrgPolicy
  
  - from: PluginOrch
    to: LogAcctPolicy
  - from: PluginOrch
    to: SharedSvcAcctPolicy
    
  - from: PluginOrch
    to: WorkAPolicy
  - from: PluginOrch
    to: WorkAPolicy


- name: Security
  relations: 
  - from: SecurityAcct
    to: WorkloadAccts
  - from: SecurityAcct
    to: LoggingAcct
  - from: SecurityAcct
    to: SharedSvcAcct
  
  
- name: Logging
  
  
- name: Shared Services
  
  
- name: Workload
  relations: 
  - from: WorkAPolicy
    to: WorkloadA
  - from: WorkloadA
    to: EKSNodeGrpA
  - from: WorkloadA
    to: EKSNodeGrpB
